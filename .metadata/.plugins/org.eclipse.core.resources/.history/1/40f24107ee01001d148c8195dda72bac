/**
* Name: Assignment2
* Based on the internal empty template. 
* Author: Hyesop Shin
* Tags: 
*/


model ExCellularAutomata

global {
	//File for the ascii grid
	file raster_file <- grid_file("../includes/dem_cambridge.tif");
grid myCA file: raster_file {
}


  
  reflex stop_simulation when: (time = 25) {
    do pause ;
    }
}



// Define an experiment that visualises the CA 
experiment simulation type: gui {
  output {
    display myMap  {
      grid myCA border:#grey;
    }
    
    display  chart {
  // plot amount of cells with more water than 20 units 
  chart "myChart" type:series {
    data "water cells" value: myCA count (each.grid_value > 20);
  }
}

display  amount_of_water {
  // plot the total volume of water in the study area  
  chart "Amount of water" type:series {
    data "water volume" value: sum(myCA collect each.grid_value);
  }
}
  }
}